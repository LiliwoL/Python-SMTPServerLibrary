<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Formulaire envoi de mail</title>

    <!-- Inclusion de la librairie smtpjs -->
    <script src="http://172.16.0.100:666/v1/" type="text/javascript"></script>
</head>
<body>

    <form id="formulaireEnvoiMail">
        <input type="email" id="to" name="to" placeholder="Destinataire" required>
        <input type="email" id="reply-to" name="reply-to" placeholder="Répondre à" required>
        <input type="text" id="subject" name="subject" placeholder="Sujet" required>
        <textarea id="body" name="body" placeholder="Corps du message" required></textarea>
        <button type="submit">Envoyer</button>
    </form>


    <script type="text/javascript">
        document.getElementById('formulaireEnvoiMail').addEventListener('submit', function(e) {
            e.preventDefault();

            // Ajout d'un écouteur d'événement
            document.getElementById('formulaireEnvoiMail').addEventListener('submit', function(e) {
                // On évite le comportment par défaut d'un formulaire
                e.preventDefault();
                Email.send(
                    {
                        "to" : document.getElementById('to').value,
                        "reply-to" : document.getElementById('reply-to').value,
                        "subject" : document.getElementById('subject').value,
                        "body" : document.getElementById('body').value
                    }
                ).then(
                    message => console.log(message)
                );
            });
        });
    </script>
</body>
</html>